(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fe3d434"],{"2a68":function(t,e,a){},"383d":function(t,e,a){"use strict";var r=a("2a68"),s=a.n(r);s.a},"7c11":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"d",(function(){return i}));var r=[{value:"JS-9-1.11",label:"JS-9-1.11",children:[{value:"A型",label:"A型",children:null},{value:"B型",label:"B型",children:null}]},{value:"JS-9-1.268",label:"JS-9-1.268",children:[{value:"R型电机",label:"R型电机",children:null}]},{value:"JS-9-1.142",label:"JS-9-1.142",children:[{value:"B型",label:"B型",children:null},{value:"M型",label:"M型",children:null}]},{value:"JS-9-1.444",label:"JS-9-1.444",children:[{value:"A型",label:"A型",children:null}]}],s=[{value:"JS-9-1.146",label:"JS-9-1.146",children:[{value:"SS型",label:"SS型",children:null},{value:"A型",label:"A型",children:null},{value:"B型",label:"B型",children:null},{value:"123",label:"123",children:null},{value:"C型",label:"C型",children:null},{value:"D型",label:"D型",children:null},{value:"DD型",label:"DD型",children:null}]},{value:"JS-9-1.380",label:"JS-9-1.380",children:[{value:"SS型",label:"SS型",children:null},{value:"A型",label:"A型",children:null}]},{value:"JS-9-1.249",label:"JS-9-1.249",children:[{value:"S型",label:"S型",children:null}]},{value:"JS-9-1.224",label:"JS-9-1.224",children:[{value:"A型",label:"A型",children:null}]},{value:"JS-9-1.229",label:"JS-9-1.229",children:[{value:"A型",label:"A型",children:null}]},{value:"JS-9-1.445",label:"JS-9-1.445",children:[{value:"B型",label:"B型",children:null}]},{value:"JS-9-1.234",label:"JS-9-1.234",children:[{value:"10型",label:"10型",children:null}]}],n=[{id:1,typeName:"综合检测"},{id:2,typeName:"静音检测"},{id:3,typeName:"外观检测"}],i=[{statusName:"正常",total:0,qualified:0,lineNo:22,sn:1009,productClass:"TF型",qc1SopTagId:null,qc2SopTagId:null,qc3SopTagId:null,taskCount:260,startTime:"09:30:00",endTime:"19:30:00",status:1,createBy:0,createTime:"2020-01-13 00:00:00",id:"1226afb6165e41a8b9596f7912380728"},{statusName:"正常",total:22,qualified:0,lineNo:22,sn:1009,productClass:"EEEBM",qc1SopTagId:null,qc2SopTagId:null,qc3SopTagId:null,taskCount:30,startTime:"11:30:00",endTime:"12:30:00",status:1,createBy:0,createTime:"2020-01-10 00:00:00",id:"a88c3e15a83d4254b466761aef16f623"},{statusName:"正常",total:135,qualified:14,lineNo:22,sn:1009,productClass:"RS型",qc1SopTagId:null,qc2SopTagId:null,qc3SopTagId:null,taskCount:127,startTime:"14:00:00",endTime:"18:30:00",status:1,createBy:0,createTime:"2020-01-10 00:00:00",id:"0e76b70c7da94a3181788927379565e4"},{statusName:"正常",total:0,qualified:0,lineNo:22,sn:1009,productClass:"A",qc1SopTagId:null,qc2SopTagId:null,qc3SopTagId:null,taskCount:200,startTime:"10:30:00",endTime:"21:30:00",status:1,createBy:0,createTime:"2020-01-09 00:00:00",id:"2a14a242dea14a3e988d353b9c636aa8"},{statusName:"中断",total:386,qualified:95,lineNo:22,sn:1009,productClass:"R",qc1SopTagId:null,qc2SopTagId:null,qc3SopTagId:null,taskCount:600,startTime:"10:30:00",endTime:"23:30:00",status:2,createBy:0,createTime:"2020-01-08 00:00:00",id:"b675d23487744a8ba0f38ed749d3af20"},{statusName:"正常",total:180,qualified:3,lineNo:22,sn:1014,productClass:"G",qc1SopTagId:null,qc2SopTagId:null,qc3SopTagId:null,taskCount:5,startTime:"17:30:00",endTime:"23:30:00",status:1,createBy:0,createTime:"2020-01-08 00:00:00",id:"88654306a2aa4c0dba4fbd8f60b6afaf"},{statusName:"中断",total:356,qualified:76,lineNo:22,sn:1014,productClass:"H",qc1SopTagId:null,qc2SopTagId:null,qc3SopTagId:null,taskCount:361,startTime:"11:30:00",endTime:"23:30:00",status:2,createBy:0,createTime:"2020-01-08 00:00:00",id:"e65d9109dace4e4f9eb2f9147be9a810"}]},c66f:function(t,e,a){"use strict";function r(t){var e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();return a<10&&(a="0"+a),r<10&&(r="0"+r),e+"-"+a+"-"+r}a.d(e,"a",(function(){return r}))},ed19:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dooya-container"},[a("div",{staticClass:"card"},[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{xl:7,sm:17,xs:17}},[a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.formRule,"label-width":80}},[a("FormItem",{attrs:{label:"工作时间",prop:"workTime"}},[a("TimePicker",{staticStyle:{width:"100%"},attrs:{disabled:t.distributed,format:"HH:mm",type:"timerange",steps:[1,30],placement:"bottom-end",placeholder:"请选择"},on:{"on-change":t.timeOnChange,"on-clear":t.timeClear},model:{value:t.formData.workTimeStorage,callback:function(e){t.$set(t.formData,"workTimeStorage",e)},expression:"formData.workTimeStorage"}})],1),a("FormItem",{attrs:{label:"型号",prop:"productClass"}},[a("Input",{attrs:{disabled:t.distributed,placeholder:"请输入"},model:{value:t.formData.productClass,callback:function(e){t.$set(t.formData,"productClass","string"===typeof e?e.trim():e)},expression:"formData.productClass"}})],1),a("FormItem",{attrs:{label:"数量",prop:"taskCount"}},[a("Input",{staticClass:"input-number",attrs:{disabled:t.distributed,placeholder:"请输入",type:"number"},on:{"on-keypress":t.taskCountOnPress,"on-keyup":t.taskCountOnUp},model:{value:t.formData.taskCount,callback:function(e){t.$set(t.formData,"taskCount","string"===typeof e?e.trim():e)},expression:"formData.taskCount"}})],1),a("FormItem",{attrs:{label:"综合检测",prop:"qc1SopId"}},[a("Cascader",{staticStyle:{width:"100%"},attrs:{data:t.qc1List,disabled:t.distributed,trigger:"hover",placeholder:"综合测试的SOP"},on:{"on-change":t.selectOnChangeQC1},model:{value:t.formData.qc1Select,callback:function(e){t.$set(t.formData,"qc1Select",e)},expression:"formData.qc1Select"}})],1),a("FormItem",{attrs:{label:"静音检测",prop:"qc2SopId"}},[a("Cascader",{staticStyle:{width:"100%"},attrs:{data:t.qc2List,disabled:t.distributed,trigger:"hover",placeholder:"静音检测的SOP"},on:{"on-change":t.selectOnChangeQC2},model:{value:t.formData.qc2Select,callback:function(e){t.$set(t.formData,"qc2Select",e)},expression:"formData.qc2Select"}})],1),a("FormItem",[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",disabled:t.distributed},on:{click:t.sopSubmit}},[t._v("派发")]),a("Button",{attrs:{type:"error",disabled:!t.distributed},on:{click:t.sopRemove}},[t._v("删除")])],1)],1)],1),a("Col",{attrs:{xl:3,sm:7,xs:7}},[a("div",[t.distributed?a("div",{staticClass:"result"},[a("Tag",{attrs:{color:"success"}},[t._v("派发成功")])],1):t._e(),t.distributed?a("div",{staticClass:"result"},[t._v("\n          sn码："+t._s(t.formCopy.sn)+"\n        ")]):t._e(),t.distributed?a("div",{staticClass:"result"},[t._v("\n          型号："+t._s(t.formCopy.productClass)+"\n        ")]):t._e(),t.distributed?a("div",{staticClass:"result"},[t._v("\n          数量："+t._s(t.formCopy.taskCount)+"件\n        ")]):a("div",{staticClass:"result"},[a("Tag",{attrs:{color:"error"}},[t._v("未派发任务")])],1)])]),a("Col",{attrs:{xl:14,sm:24,xs:24}},[0!==t.formData.workTime.length&&0!==t.todayTask.length?a("Row",{staticClass:"task",staticStyle:{padding:"0 10px"},attrs:{gutter:20}},t._l(t.todayTask,(function(e,r){return a("Col",{key:r,attrs:{span:12}},[a("div",{staticClass:"task-block"},[a("Col",{attrs:{span:10}},[a("div",{staticClass:"task-block-time"},[t._v("\n            "+t._s(e.startTime)+"-"+t._s(e.endTime)+"\n          ")]),a("div",[a("Checkbox",{attrs:{disabled:t.distributed},model:{value:e.work,callback:function(a){t.$set(e,"work",a)},expression:"task.work"}},[t._v("工作")])],1)]),a("Col",{attrs:{span:6}},[a("div",{staticClass:"task-block-task-title"},[t.distributed?a("span",[t._v("\n              任务量\n            ")]):t._e()]),a("div",{staticClass:"task-block-task-number"},[t.distributed?a("span",[t._v(" "+t._s(e.workTask)+"件 ")]):t._e()])]),a("Col",{attrs:{span:8}},[a("Tag",{staticStyle:{"margin-top":"15px"},attrs:{size:"large",color:e.work?"primary":"success"}},[t._v(t._s(e.work?"工作时间":"休息时间"))])],1)],1)])})),1):t._e()],1)],1),t.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)])},s=[],n=(a("28a5"),a("ac6a"),a("6b54"),a("96cf"),a("3b8d")),i=a("7c11"),o=a("c66f"),l=a("0c70"),c=(a("456d"),a("d225")),u=a("b0b4"),d=a("bc3a"),m=a.n(d),p=a("e069"),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:baseURL;Object(c["a"])(this,t),this.baseUrl=e,this.queue={}}return Object(u["a"])(t,[{key:"getInsideConfig",value:function(){var t={baseURL:this.baseUrl,headers:{}};return t}},{key:"destroy",value:function(t){delete this.queue[t],Object.keys(this.queue).length}},{key:"interceptors",value:function(t,e){var a=this;t.interceptors.request.use((function(t){return t.headers.Authorization="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwcmltYXJ5c2lkIjoiZWVjMTE5MjktM2M2MC00OTdiLTk0MmMtOTJhM2RkM2VlZWI1IiwidW5pcXVlX25hbWUiOiJjZXN0YyIsImNlcnRzZXJpYWxudW1iZXIiOiIyMiIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvZXhwaXJhdGlvbiI6IjAxLzI0LzIwMjAgMDI6MjA6NDciLCJuYmYiOjE1Nzk1NzMyNDcsImV4cCI6MTU3OTgzMjQ0NywiaWF0IjoxNTc5NTczMjQ3LCJpc3MiOiJ5dWl0ZXIuY29tIiwiYXVkIjoieXVpdGVyLmNvbSJ9.4dAXjRHmE-cpvGfEgWUzaobJwv849-hF2U2QE0zMXP8",Object.keys(a.queue).length,a.queue[e]=!0,t}),(function(t){return Promise.reject(t)})),t.interceptors.response.use((function(t){switch(t.status){case 200:!0!==t.data.status&&200!==t.data.status&&p["Message"].error({content:t.data.message,duration:5});break;case 500:console.log(t.status.message),p["Message"].error({content:"服务器异常，请联系技术人员",duration:5});break}a.destroy(e);var r=t.data,s=t.status;return{data:r,status:s}}),(function(t){return t.toString().indexOf("500")>-1&&p["Message"].error({content:"服务器异常，请联系技术人员",duration:5}),Promise.reject(t)}))}},{key:"request",value:function(t){var e=m.a.create();return t=Object.assign(this.getInsideConfig(),t),this.interceptors(e,t.url),e(t)}}]),t}(),f=h,g=a("f121"),b=g["a"].baseUrl.pro,k=new f(b),S=k,T=function(t,e,a){return S.request({url:"/api/standardValues/getSopTagFilteByEquipment?qc1soptagId=".concat(t,"&qc2soptagId=").concat(e,"&qcIndex=").concat(a),method:"get"})},v=function(t){return S.request({url:"/api/testprocess/setProductLineSnBySop",method:"post",data:t})},C=function(){return S.request({url:"/api/testprocess/getLineSn",method:"get"})},I=function(t){return S.request({url:"/api/testprocess/removeTask?id=".concat(t),method:"get"})},y={data:function(){return{qc1List:[],qc2List:[],snCodeList:[],formData:{workTime:[],workTimeStorage:[],productClass:"",taskCount:"",qc1Select:[],qc2Select:[],qc1SopId:"",qc1SopTagId:"",qc2SopId:"",qc2SopTagId:"",rest:[]},formCopy:{},todayTask:[],formRule:{workTime:[{required:!0,message:"请选择工作时间",trigger:"change"}],productClass:[{required:!0,message:"型号不能为空",trigger:"change"},{type:"string",max:20,message:"型号过长",trigger:"change"}],taskCount:[{required:!0,message:"数量不能为空",trigger:"change"},{type:"string",max:4,message:"数量过多",trigger:"change"}],qc1SopId:[{required:!0,message:"请选择SOP1",trigger:"change"}],qc2SopId:[{required:!0,message:"请选择SOP2",trigger:"change"}]},distributed:!1,processId:"",spinShow:!1}},created:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.getData(),this.isMock){t.next=10;break}return t.next=4,T("","","1");case 4:if(t.t1=t.sent.data.data,t.t1){t.next=7;break}t.t1=[];case 7:t.t0=t.t1,t.next=11;break;case 10:t.t0=i["a"];case 11:if(this.qc1List=t.t0,this.isMock){t.next=21;break}return t.next=15,T("","","2");case 15:if(t.t3=t.sent.data.data,t.t3){t.next=18;break}t.t3=[];case 18:t.t2=t.t3,t.next=22;break;case 21:t.t2=i["b"];case 22:this.qc2List=t.t2;case 23:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.spinShow=!0,this.isMock){t.next=9;break}return t.next=4,C();case 4:e=t.sent,this.distributed=null!==e.data.data,this.distributed?(this.processId=e.data.data.id,this.formCopy=e.data.data,this.formData={workTimeStorage:[this.formCopy.startTime,this.formCopy.endTime],productClass:this.formCopy.productClass,taskCount:this.formCopy.taskCount.toString(),qc1Select:[this.formCopy.qc1SopId.toString(),this.formCopy.qc1SopTagId],qc2Select:[this.formCopy.qc2SopId.toString(),this.formCopy.qc2SopTagId]},this.timeOnChange(this.formData.workTimeStorage),this.todayTask.forEach((function(t,r){a.$set(t,"workTask",e.data.data.workingTimeTask[r]),a.$set(t,"work",0!==e.data.data.workingTimeTask[r])}))):(null!==localStorage.getItem("taskDistribution")&&(this.formData=JSON.parse(Object(l["a"])(this,"taskDistribution"))),null!==localStorage.getItem("todayTask")&&(this.todayTask=JSON.parse(Object(l["a"])(this,"todayTask"))),this.timeOnChange(this.formData.workTimeStorage)),t.next=16;break;case 9:null!==localStorage.getItem("taskDistribution")&&(this.formData=JSON.parse(Object(l["a"])(this,"taskDistribution"))),null!==localStorage.getItem("todayTask")&&(this.todayTask=JSON.parse(Object(l["a"])(this,"todayTask"))),this.timeOnChange(this.formData.workTimeStorage),this.distributed="true"===localStorage.getItem("distributed"),this.formData.createTime=Object(o["a"])(new Date),this.formData.sn=1001,this.formCopy=JSON.parse(JSON.stringify(this.formData));case 16:this.spinShow=!1;case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),selectOnChangeQC1:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.formData.qc1SopId=e[0]||"",this.formData.qc1SopTagId=e[1]||"",t.next=4,T(this.formData.qc1SopTagId,"","2");case 4:if(t.t0=t.sent.data.data,t.t0){t.next=7;break}t.t0=[];case 7:this.qc2List=t.t0;case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),selectOnChangeQC2:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.formData.qc2SopId=e[0]||"",this.formData.qc2SopTagId=e[1]||"",t.next=4,T("",this.formData.qc2SopTagId,"1");case 4:if(t.t0=t.sent.data.data,t.t0){t.next=7;break}t.t0=[];case 7:this.qc1List=t.t0;case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),timeOnChange:function(t){if(this.formData.workTime=""!==t[0]?t.join(","):"",0!==this.formData.workTimeStorage.length){var e=parseInt(this.formData.workTimeStorage[0]),a="00"===this.formData.workTimeStorage[0].substring(3,5)?0:.5,r=e+a,s=parseInt(this.formData.workTimeStorage[1]),n="00"===this.formData.workTimeStorage[1].substring(3,5)?0:.5,i=s+n;this.todayTask=[];for(var o=r,l=0;o<i;o+=.5,l++)this.todayTask.push({startTime:(r+.5*l)%1===0?parseInt(r+.5*l)+":00":parseInt(r+.5*l)+":30",endTime:(r+.5*l+.5)%1===0?parseInt(r+.5*l+.5)+":00":parseInt(r+.5*l+.5)+":30",work:!0})}},timeClear:function(){this.formData.workTimeStorage=[]},taskCountOnPress:function(t){"e"!==t.key&&"E"!==t.key&&"."!==t.key&&"-"!==t.key||t.preventDefault()},taskCountOnUp:function(t){"0"===t.srcElement.value.slice(0,1)&&"0"===t.key&&(t.srcElement.value=parseInt(t.srcElement.value))},snCodeOnChange:function(t){void 0!==t&&(this.formData.qc1SopTagId=t.split(",")[0],this.formData.qc2SopTagId=t.split(",")[1])},sopSubmit:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs.formData.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=23;break}if(r=JSON.parse(JSON.stringify(e.formData)),r.startTime=Object(o["a"])(new Date)+" "+e.formData.workTime.split(",")[0],r.endTime=Object(o["a"])(new Date)+" "+e.formData.workTime.split(",")[1],s=[],e.todayTask.forEach((function(t,e){t.work||s.push(e+1)})),r.rest=s,e.spinShow=!0,localStorage.setItem("taskDistribution",JSON.stringify(e.formData)),e.isMock){t.next=16;break}return t.next=12,v(r);case 12:n=t.sent,200===n.data.status&&(e.spinShow=!0,e.$refs.formData.resetFields(),e.$Message.success("派发成功，SN码为".concat(n.data.data.sn)),e.processId=n.data.data.id,localStorage.setItem("todayTask",JSON.stringify(e.todayTask)),e.getData()),t.next=22;break;case 16:e.distributed=!0,e.$refs.formData.resetFields(),e.$Message.success("派发成功，SN码为1001"),localStorage.setItem("todayTask",JSON.stringify(e.todayTask)),localStorage.setItem("distributed",e.distributed),e.getData();case 22:e.spinShow=!1;case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),sopRemove:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$Modal.confirm({title:"确定删除该任务？",onOk:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isMock){t.next=8;break}return e.spinShow=!0,t.next=4,I(e.processId);case 4:a=t.sent,200===a.data.status?(e.$Message.success("删除成功"),e.getData()):e.spinShow=!1,t.next=11;break;case 8:e.$Message.success("删除成功"),e.distributed=!1,localStorage.setItem("distributed",e.distributed);case 11:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}(),closable:!0});case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},w=y,q=(a("383d"),a("2877")),D=Object(q["a"])(w,r,s,!1,null,"579c1aa8",null);e["default"]=D.exports}}]);