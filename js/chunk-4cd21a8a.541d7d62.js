(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cd21a8a"],{"455d":function(t,e,a){},"895a":function(t,e,a){"use strict";var i=a("455d"),s=a.n(i);s.a},d7db:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control-container",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("img",{staticClass:"control-container-header",attrs:{src:a("0f51")}}),i("table"),i("div",{staticClass:"control-container-title"},[i("h2",{on:{click:t.backRouter}},[t._v(t._s(t.lineNo)+"号产线")])]),i("div",{staticClass:"control-container-inner"},[i("Row",{attrs:{gutter:20}},[i("Col",{staticClass:"col-left",attrs:{xs:24,sm:24,md:8,xl:6}},[i("ul",t._l(t.lineCompletedRate,(function(e,a){return i("li",{key:a,staticClass:"col-block col-block-min",style:{height:t.colBlockMinHeight}},[i("div",{staticClass:"col-block-title left"},[t._v("\n            达成率："+t._s(e.process)+"\n          ")]),i("div",{staticClass:"col-block-chart"},[i("lineChart",{style:{height:parseInt(t.colBlockMinHeight)-70+"px"},attrs:{chartData:e.chartData,standardValue:e.standardValue||80}})],1)])})),0)]),i("Col",{attrs:{xs:24,sm:24,md:16,xl:12}},[i("div",{ref:"colBlockLarge",staticClass:"col-block col-block-large",style:{height:t.colBlockLargeHeight}},[i("div",{staticClass:"col-block-title"},[t._v("\n          产线总览\n        ")]),i("div",{staticClass:"col-block-chart whole",style:{height:parseInt(t.colBlockLargeHeight)-70+"px",padding:t.screenHeight>900?"2% 0":"1% 0"}},t._l(t.lineProcessData,(function(e,a){return i("div",{key:a,staticClass:"MainBlock",style:{padding:t.screenHeight>1e3?"20px 0":t.screenHeight>800?"10px 0":"0"}},[i("div",{staticClass:"MainBlock-title"},[t._v(t._s(e.process))]),i("span",{staticClass:"MainBlock-title-block-small"},[t._v("检测数")]),i("span",{staticClass:"MainBlock-title-block-huge"},[t._v(t._s(e.totalNum))]),i("span",{staticClass:"MainBlock-title-block-small"},[t._v("台")]),i("span",{staticClass:"MainBlock-title-block-small"},[t._v("/")]),i("span",{staticClass:"MainBlock-title-block-small"},[t._v("良品数")]),i("span",{staticClass:"MainBlock-title-block-huge"},[t._v(t._s(e.completeNum))]),i("span",{staticClass:"MainBlock-title-block-small"},[t._v("台")]),i("span",{staticClass:"MainBlock-title-block-small"}),i("span",{staticClass:"MainBlock-title-block",staticStyle:{"vertical-align":"bottom"}},[i("i-circle",{staticStyle:{"margin-right":"10px"},attrs:{percent:e.completeRate,"stroke-color":100===e.completeRate?"#5cb85c":e.completeRate>=60?"#2db7f5":"#ff5500",size:70}},[i("span",{staticClass:"demo-Circle-inner",staticStyle:{"font-size":"1.2em",color:"#fff"}},[i("p",{staticStyle:{"line-height":"1.3em"}},[t._v("达成率")]),t._v("\n                  "+t._s(e.completeRate)+"%\n                ")])]),i("i-circle",{attrs:{percent:e.qualifiedRate,"stroke-color":100===e.qualifiedRate?"#5cb85c":e.qualifiedRate>=60?"#2db7f5":"#ff5500",size:70}},[i("span",{staticClass:"demo-Circle-inner",staticStyle:{"font-size":"1.2em",color:"#fff"}},[i("p",{staticStyle:{"line-height":"1.3em"}},[t._v("良品率")]),t._v("\n                  "+t._s(e.qualifiedRate)+"%\n                ")])])],1)])})),0)]),i("Row",{attrs:{gutter:20}},[i("Col",{attrs:{xs:24,sm:24,md:8,xl:8}},[i("div",{staticClass:"col-block col-block-min col-block-min-mid",style:{height:t.colBlockMidHeight}},[i("div",{staticClass:"col-block-title"},[t._v("\n            不合格原因：综合检测\n          ")]),i("div",{staticClass:"col-block-chart"},[i("pieChart",{style:{height:parseInt(t.colBlockMidHeight)-70+"px"},attrs:{chartData:t.pieUnqalifiedReason.qc1}})],1)])]),i("Col",{attrs:{xs:24,sm:24,md:8,xl:8}},[i("div",{staticClass:"col-block col-block-min col-block-min-mid",style:{height:t.colBlockMidHeight}},[i("div",{staticClass:"col-block-title"},[t._v("\n            不合格原因：静音检测\n          ")]),i("div",{staticClass:"col-block-chart"},[i("pieChart",{style:{height:parseInt(t.colBlockMidHeight)-70+"px"},attrs:{chartData:t.pieUnqalifiedReason.qc2}})],1)])]),i("Col",{attrs:{xs:24,sm:24,md:8,xl:8}},[i("div",{staticClass:"col-block col-block-min col-block-min-mid",style:{height:t.colBlockMidHeight}},[i("div",{staticClass:"col-block-title"},[t._v("\n            不合格原因：外观检测\n          ")]),i("div",{staticClass:"col-block-chart"},[i("pieChart",{style:{height:parseInt(t.colBlockMidHeight)-70+"px"},attrs:{chartData:t.pieUnqalifiedReason.qc3}})],1)])])],1)],1),i("Col",{attrs:{xs:24,sm:24,md:24,xl:6}},[i("ul",t._l(t.lineQualifiedRate,(function(e,a){return i("li",{key:a,staticClass:"col-block col-block-min",style:{height:t.colBlockMinHeight}},[i("div",{staticClass:"col-block-title left"},[t._v("\n            良品率："+t._s(e.process)+"\n          ")]),i("div",{staticClass:"col-block-chart"},[i("lineChart",{style:{height:parseInt(t.colBlockMinHeight)-70+"px"},attrs:{chartData:e.chartData,standardValue:e.standardValue||80}})],1)])})),0)])],1)],1)])},s=[],l=(a("ac6a"),a("6b54"),a("96cf"),a("3b8d")),c=a("0c70"),n=a("11e7"),o=a("5f43"),r=a("e2d4"),h=a("76d7"),u={components:{lineChart:n["a"],pieChart:o["a"]},data:function(){return{lineNo:"",screenHeight:0,colBlockMinHeight:"0px",colBlockLargeHeight:"0px",colBlockMidHeight:"0px",lineCompletedRate:[{process:"综合检测",chartData:{xAxisData:[],seriesData:[]}},{process:"综合检测",chartData:{xAxisData:[],seriesData:[]}},{process:"综合检测",chartData:{xAxisData:[],seriesData:[]}}],lineQualifiedRate:[{process:"综合检测",chartData:{xAxisData:[],seriesData:[]}},{process:"综合检测",chartData:{xAxisData:[],seriesData:[]}},{process:"综合检测",chartData:{xAxisData:[],seriesData:[]}}],pieUnqalifiedReason:{},lineProcessData:[],client:null}},mounted:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getHeight(),window.onresize=function(){return function(){e.getHeight()}()};case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),created:function(){void 0!==this.$route.query.lineNo?this.lineNo=this.$route.query.lineNo:this.lineNo=Object(c["a"])(this,"loginLineNo"),this.getData()},methods:{getHeight:function(){this.screenHeight=document.body.clientHeight;var t=80;this.colBlockMinHeight=(this.screenHeight-t-40-60)/3+"px",this.colBlockLargeHeight=2*(this.screenHeight-t-40-40)/3+"px",this.colBlockMidHeight=1*(this.screenHeight-t-40-40)/3+"px"},getData:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.isMock?(this.lineCompletedRate=r["b"],this.lineQualifiedRate=r["d"],this.pieUnqalifiedReason=r["e"],this.lineProcessData=r["c"]):(this.client=h["b"].connect(h["a"],h["c"]),this.client.on("connect",(function(t){e.client.subscribe("".concat(e.lineNo,"-ProductLine"),{qos:1},(function(t){}))})),this.client.on("message",(function(t,a){var i=JSON.parse(a.toString());console.log(i);var s=i.LineRateOverview;e.lineProcessData=[{process:"检测结果",totalNum:s.QcSum,completeNum:s.QcQualified,completeRate:parseInt(1e4*s.QcCompleteRate)/100,qualifiedRate:parseInt(1e4*s.QcQualifiedRate)/100},{process:"综合检测",totalNum:s.Qc1Sum,completeNum:s.Qc1Qualified,completeRate:parseInt(1e4*s.Qc1CompleteRate)/100,qualifiedRate:parseInt(1e4*s.Qc1QualifiedRate)/100},{process:"静音检测",totalNum:s.Qc2Sum,completeNum:s.Qc2Qualified,completeRate:parseInt(1e4*s.Qc2CompleteRate)/100,qualifiedRate:parseInt(1e4*s.Qc2QualifiedRate)/100},{process:"外观检测",totalNum:s.Qc3Sum,completeNum:s.Qc3Qualified,completeRate:parseInt(1e4*s.Qc3CompleteRate)/100,qualifiedRate:parseInt(1e4*s.Qc3QualifiedRate)/100}],null!==i.Qc1UnqualifiedReason&&i.Qc1UnqualifiedReason.forEach((function(t){e.$set(t,"value",t.Value),e.$set(t,"name",t.Key||"未知")})),null!==i.Qc2UnqualifiedReason&&i.Qc2UnqualifiedReason.forEach((function(t){e.$set(t,"value",t.Value),e.$set(t,"name",t.Key||"未知")})),null!==i.Qc3UnqualifiedReason&&i.Qc3UnqualifiedReason.forEach((function(t){e.$set(t,"value",t.Value),e.$set(t,"name",t.Key||"未知")})),e.pieUnqalifiedReason={qc1:i.Qc1UnqualifiedReason||[],qc2:i.Qc2UnqualifiedReason||[],qc3:i.Qc3UnqualifiedReason||[]};var l={xAxisData:[],seriesData:[]},c={xAxisData:[],seriesData:[]},n={xAxisData:[],seriesData:[]},o={xAxisData:[],seriesData:[]},r={xAxisData:[],seriesData:[]},h={xAxisData:[],seriesData:[]};if(null!==i.LineRateDetail){i.LineRateDetail.forEach((function(t){l.xAxisData.push(t.StartTime.substring(0,t.StartTime.length-3)),c.xAxisData.push(t.StartTime.substring(0,t.StartTime.length-3)),n.xAxisData.push(t.StartTime.substring(0,t.StartTime.length-3)),l.seriesData.push(100*t.Qc1CompleteRate),c.seriesData.push(100*t.Qc2CompleteRate),n.seriesData.push(100*t.Qc3CompleteRate),o.xAxisData.push(t.StartTime.substring(0,t.StartTime.length-3)),r.xAxisData.push(t.StartTime.substring(0,t.StartTime.length-3)),h.xAxisData.push(t.StartTime.substring(0,t.StartTime.length-3)),o.seriesData.push(100*t.Qc1QualifiedRate),r.seriesData.push(100*t.Qc2QualifiedRate),h.seriesData.push(100*t.Qc3QualifiedRate)}));var u=parseInt(1e4*i.LineRateDetail[0].CompleteRateTask)/100;e.lineCompletedRate=[{process:"综合检测",chartData:l,standardValue:u},{process:"静音检测",chartData:c,standardValue:u},{process:"外观检测",chartData:n,standardValue:u}],e.lineQualifiedRate=[{process:"综合检测",chartData:o,standardValue:u},{process:"静音检测",chartData:r,standardValue:u},{process:"外观检测",chartData:h,standardValue:u}]}})));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),backRouter:function(){this.isMock||this.client.end(),this.$router.go(-1)}}},d=u,p=(a("895a"),a("2877")),m=Object(p["a"])(d,i,s,!1,null,"294a664e",null);e["default"]=m.exports}}]);