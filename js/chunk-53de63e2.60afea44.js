(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53de63e2"],{"3c56":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dooya-container"},[a("Card",[a("div",{staticStyle:{margin:"10px 0"}},[a("Button",{attrs:{type:"success",icon:"md-add"},on:{click:e.insert}},[e._v("新增异常原因")])],1),a("Table",{attrs:{border:"","disabled-hover":"",data:e.tableData,columns:e.tableColumns,stripe:""}})],1),a("Modal",{attrs:{"mask-closable":!1,closable:!1,"footer-hide":"",title:"不合格项目"},on:{"on-ok":e.handleSubmit},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[a("Form",{ref:"formModalData",attrs:{model:e.modalData,rules:e.formModalRule,"label-width":100},nativeOn:{submit:function(e){e.preventDefault()}}},[a("FormItem",{attrs:{label:"所属步骤：",prop:"test_item_group_index"}},[a("Select",{model:{value:e.modalData.test_item_group_index,callback:function(t){e.$set(e.modalData,"test_item_group_index",t)},expression:"modalData.test_item_group_index"}},[a("Option",{attrs:{value:"1"}},[e._v("综合检测")]),a("Option",{attrs:{value:"2"}},[e._v("静音检测")]),a("Option",{attrs:{value:"3"}},[e._v("外观检测")])],1)],1),a("FormItem",{attrs:{label:"不良品项：",prop:"unqualified_name"}},[a("Input",{attrs:{type:"text"},model:{value:e.modalData.unqualified_name,callback:function(t){e.$set(e.modalData,"unqualified_name","string"===typeof t?t.trim():t)},expression:"modalData.unqualified_name"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formModalData")}}},[e._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleReset("formModalData")}}},[e._v("取消")])],1)],1)],1)],1)},n=[],r=(a("ac6a"),a("6b54"),a("96cf"),a("3b8d")),u=a("f11f"),o=a("66df"),s=function(){return o["a"].request({url:"/api/unqualified/getall",method:"get"})},m=function(e){return o["a"].request({url:"/api/unqualified/add",method:"post",data:e})},d=function(e){return o["a"].request({url:"/api/unqualified/edit",method:"post",data:e})},l=function(e){return o["a"].request({url:"/api/unqualified/remove?id=".concat(e),method:"get"})},_={data:function(){var e=this;return{tableDataOrg:[{unqualified_item:[{unqualified_name:"刹车打滑",id:1,test_item_group_name:"综合检测"},{unqualified_name:"砝码拉不动",id:2,test_item_group_name:"综合检测"},{unqualified_name:"单转",id:3,test_item_group_name:"综合检测"},{unqualified_name:"短路",id:4,test_item_group_name:"综合检测"},{unqualified_name:"反转",id:5,test_item_group_name:"综合检测"},{unqualified_name:"不转",id:6,test_item_group_name:"综合检测"},{unqualified_name:"减速不良",id:7,test_item_group_name:"综合检测"},{unqualified_name:"对码不良",id:8,test_item_group_name:"综合检测"},{unqualified_name:"转速不良",id:9,test_item_group_name:"综合检测"},{unqualified_name:"点动",id:10,test_item_group_name:"综合检测"},{unqualified_name:"蜗杆紧/松",id:11,test_item_group_name:"综合检测"},{unqualified_name:"蜗杆减不死",id:12,test_item_group_name:"综合检测"},{unqualified_name:"通电自转",id:13,test_item_group_name:"综合检测"},{unqualified_name:"蜗杆加不活",id:14,test_item_group_name:"综合检测"},{unqualified_name:"芯片测试不良",id:15,test_item_group_name:"综合检测"}],test_item_group_name:"综合检测"},{unqualified_item:[{unqualified_name:"低电压不吸合",id:16,test_item_group_name:"静音检测"},{unqualified_name:"热保护不到4分钟",id:17,test_item_group_name:"静音检测"},{unqualified_name:"超分贝",id:18,test_item_group_name:"静音检测"},{unqualified_name:"轴承响",id:19,test_item_group_name:"静音检测"},{unqualified_name:"电机扫堂",id:20,test_item_group_name:"静音检测"},{unqualified_name:"电机响",id:21,test_item_group_name:"静音检测"},{unqualified_name:"杂音(减速异响）",id:22,test_item_group_name:"静音检测"},{unqualified_name:"接地不过",id:23,test_item_group_name:"静音检测"},{unqualified_name:"高压不过",id:24,test_item_group_name:"静音检测"}],test_item_group_name:"静音检测"},{unqualified_item:[{unqualified_name:"外管不良",id:25,test_item_group_name:"外观检测"},{unqualified_name:"螺丝、销子不良",id:26,test_item_group_name:"外观检测"},{unqualified_name:"排线不良",id:27,test_item_group_name:"外观检测"},{unqualified_name:"电源线不良",id:28,test_item_group_name:"外观检测"},{unqualified_name:"电子行程头不良",id:29,test_item_group_name:"外观检测"},{unqualified_name:"内外端盖不良",id:30,test_item_group_name:"外观检测"},{unqualified_name:"行程内齿套不良",id:31,test_item_group_name:"外观检测"},{unqualified_name:"行程网印不良",id:32,test_item_group_name:"外观检测"},{unqualified_name:"零件漏装、多装、错装",id:33,test_item_group_name:"外观检测"},{unqualified_name:"前盖板方轴不良",id:34,test_item_group_name:"外观检测"},{unqualified_name:"电源线、铜皮脱落、接地端子不良",id:35,test_item_group_name:"外观检测"}],test_item_group_name:"外观检测"}],tableData:[],tableColumns:[{title:"测试步骤",key:"test_item_group_name",align:"center",minWidth:120},{title:"不合格项目",key:"list",align:"center",render:function(t,a){return t("div",{attrs:{class:"subCol"}},[t("ul",e.tableDataOrg[a.index].unqualified_item.map((function(e){return t("li",{},e.unqualified_name)})))])},minWidth:200},{title:"操作",key:"action",minWidth:150,align:"center",render:function(t,a){return t("div",{attrs:{class:"subCol"}},[t("ul",e.tableDataOrg[a.index].unqualified_item.map((function(i,n){return t("li",[t("Tooltip",{props:{trigger:"hover",content:"修改",placement:"top",transfer:!0}},[t("Button",{props:{type:"primary",size:"small",icon:"ios-create-outline"},style:{marginRight:"5px"},on:{click:function(){e.edit(a.row.unqualified_item[n])}}})]),t("Tooltip",{props:{trigger:"hover",content:"删除",placement:"top",transfer:!0}},[t("Button",{props:{type:"error",size:"small",icon:"md-close"},on:{click:function(){e.delete(a.row.unqualified_item[n])}}})])])})))])}}],pageNum:1,pageSize:10,modalShow:!1,modalData:{test_item_group_index:"",unqualified_name:""},formModalRule:{test_item_group_index:[{required:!0,message:"请选择所属步骤",trigger:"change"}],unqualified_name:[{required:!0,message:"请输入不良品项",trigger:"change"},{type:"string",max:20,message:"不良品项过长",trigger:"change"}]},modalDataType:""}},created:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getData();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getData:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isMock){e.next=7;break}return e.next=3,s();case 3:if(e.t0=e.sent.data.data,e.t0){e.next=6;break}e.t0=[];case 6:this.tableDataOrg=e.t0;case 7:this.refreshData();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshData:function(){this.tableData=this.tableDataOrg},changePage:function(e){this.pageNum=e,this.refreshData()},changePageSize:function(e){this.pageSize=e,this.refreshData()},insert:function(){this.modalDataType="insert",this.$refs.formModalData.resetFields(),this.modalShow=!0},edit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isMock?(this.modalDataType="edit",this.modalData=t,this.modalData.test_item_group_name=t.test_item_group_name,localStorage.setItem("test_item_group_name",this.modalData.test_item_group_name),this.modalShow=!0):(this.modalDataType="edit",this.modalData=JSON.parse(JSON.stringify(t)),this.modalData.test_item_group_index=this.modalData.test_item_group_index.toString(),this.modalShow=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleSubmit:function(){var e=this;this.$refs.formModalData.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=28;break}t.t0=e.modalDataType,t.next="insert"===t.t0?4:"edit"===t.t0?16:28;break;case 4:if(e.isMock){t.next=11;break}return t.next=7,m(e.modalData);case 7:i=t.sent.data.status,200===i&&(e.$refs.formModalData.resetFields(),e.$Message.success("新增成功！"),e.modalShow=!1,e.getData()),t.next=15;break;case 11:e.tableDataOrg.forEach((function(t){e.modalData.test_item_group_name.indexOf(t.test_item_group_name)>-1&&(e.modalData.id=(e.tableDataOrg.length+1).toString(),t.unqualified_item.push(e.modalData))})),e.refreshData(),e.$Message.success("添加成功!"),e.modalShow=!1;case 15:return t.abrupt("break",28);case 16:if(e.isMock){t.next=23;break}return t.next=19,d(e.modalData);case 19:n=t.sent.data.status,200===n&&(e.$refs.formModalData.resetFields(),e.$Message.success("修改成功！"),e.modalShow=!1,e.getData()),t.next=27;break;case 23:localStorage.getItem("test_item_group_name")===e.modalData.test_item_group_name?e.tableDataOrg.forEach((function(t){e.modalData.test_item_group_name===t.test_item_group_name&&t.unqualified_item.forEach((function(t){e.modalData.id===t.id&&e.$set(t,"unqualified_name",e.modalData.unqualified_name)}))})):e.tableDataOrg.forEach((function(t){localStorage.getItem("test_item_group_name")===t.test_item_group_name&&t.unqualified_item.forEach((function(a){if(e.modalData.id===a.id){var i=t.unqualified_item.indexOf(a);t.unqualified_item.splice(i,1)}})),e.modalData.test_item_group_name===t.test_item_group_name&&t.unqualified_item.push(e.modalData)})),e.refreshData(),e.$Message.success("修改成功!"),e.modalShow=!1;case 27:return t.abrupt("break",28);case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleReset:function(){this.$refs.formModalData.resetFields(),this.modalShow=!1},delete:function(e){var t=this;this.$Modal.confirm({title:"确定删除该不良品项？",onOk:function(){var a=Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.isMock){a.next=7;break}return a.next=3,l(e.id);case 3:i=a.sent.data.status,Object(u["e"])(i,"删除成功！",(function(){t.getData()})),a.next=10;break;case 7:t.tableDataOrg.forEach((function(t){e.test_item_group_name===t.test_item_group_name&&t.unqualified_item.forEach((function(a){if(e.test_item_group_name===a.test_item_group_name){var i=t.unqualified_item.indexOf(a);t.unqualified_item.splice(i,1)}}))})),t.$Message.success("删除成功"),t.refreshData();case 10:case"end":return a.stop()}}),a)})));function i(){return a.apply(this,arguments)}return i}(),closable:!0})}}},c=_,f=(a("a15f"),a("2877")),p=Object(f["a"])(c,i,n,!1,null,"39cd435e",null);t["default"]=p.exports},"9fea":function(e,t,a){},a15f:function(e,t,a){"use strict";var i=a("9fea"),n=a.n(i);n.a},f11f:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return s}));a("c5f6"),a("6b54"),a("28a5"),a("4f7f"),a("5df3"),a("1c4c"),a("ac6a");var i=a("e069");var n=function(e){var t=[];return e.forEach((function(e){"root"===e.parenetId&&t.push({title:e.title,id:e.id,children:[]})})),t.forEach((function(t){e.forEach((function(e){t.id===e.parenetId&&t.children.push({title:e.title,id:e.id,children:[]})}))})),t.length>0&&(t[0].expand=!0),t};function r(e,t){return function(a,i){return"asc"===t||void 0===t||""===t?a[e]>i[e]?1:a[e]<i[e]?-1:0:"desc"===t?a[e]<i[e]?1:a[e]>i[e]?-1:0:void 0}}function u(e,t,a,i){var n="";return e.forEach((function(e){e[t].toString()===a&&(n=e[i])})),n}var o=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;return e.forEach((function(e){a&&(i+=Number(e[t]))})),i},s=function(e,t,a,n){return 200===e?(i["Message"].success({content:t}),a.call()):n.call()}}}]);